(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(30),c=a.n(r),s=(a(105),a(47)),o=a(17),i=a(13),l=function(){var e=window.localStorage.getItem("token");if(!e)return!1;var t=e.split(".");return!(t.length<3)&&JSON.parse(atob(t[1]))},j=function(){var e=l();return!!e&&Math.round(Date.now()/1e3)<e.exp},b=a(103),u=a(44),d=a(64),h=a(18),O=a(10),m=a(80),x=a(2),p=a(49),f=a(23),g=a(16),v=a(12),y=a.n(v),k=a(15),w=a(14),N=a.n(w),C=a(28),_=a(29),S=a(24),L=a(1),F=function(e){var t=e.characterType,a=Object(n.useState)(null),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),j=l[0],b=l[1],u=Object(n.useState)({first_name:"",last_name:"",character_bio:"",character_archetypes:[],books:[]}),d=Object(i.a)(u,2),m=d[0],v=d[1];Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("api/archetypes/");case 2:t=e.sent,a=t.data,s(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("api/books/");case 2:t=e.sent,a=t.data,b(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var w=function(e){var t=e.target,a=t.value,n=t.name,r=Object(g.a)(Object(g.a)({},m),{},Object(f.a)({},n,a));v(r)},F=function(e,t){var a=e?e.map((function(e){return e.value})):[];v(Object(g.a)(Object(g.a)({},m),{},Object(f.a)({},t,Object(p.a)(a))))},I=function(){var e=Object(k.a)(y.a.mark((function e(a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,N.a.post("/api/".concat(t,"/"),m);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!j||!c)return null;var T=j.map((function(e){return{value:e.id,label:e.title}})),G=c.map((function(e){return{value:e.id,label:e.archetype}})),B="supporting_characters"===t?"Create a New Supporting Character":"antagonists"===t?"Create a New Antagonist":"protagonists"===t?"Create a New Protagonist":null;return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(x.a,{onSubmit:I,children:[Object(L.jsx)(h.a.Header,{closeButton:!0,children:Object(L.jsx)(h.a.Title,{children:B})}),Object(L.jsxs)(h.a.Body,{children:[Object(L.jsxs)(x.a.Row,{children:[Object(L.jsx)(S.a,{children:Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"First Name"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"What is their first name",required:!0,value:m.first_name,name:"first_name",onChange:w}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:'for a character with a title or one given name enter here. e.g "Lord Voldemort".'})]})}),Object(L.jsx)(S.a,{children:Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Last Name"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"What is their last name",name:"last_name",value:m.last_name,onChange:w}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:"input user message"})]})})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Character Bio"}),Object(L.jsx)(x.a.Control,{as:"textarea",rows:5,placeholder:"enter info about the character",required:!0,name:"character_bio",value:m.character_bio,onChange:w}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:"input user message"})]}),"supporting_characters"===t&&Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Relationship to Protagonist"}),Object(L.jsx)(C.a,{name:"relationship_to_protagonist",options:[{value:"Family Member",label:"Family Member"},{value:"Rival",label:"Rival"},{value:"Love Interest",label:"Love Interest"},{value:"Friend",label:"Friend"},{value:"Companion",label:"Companion"},{value:"Ally",label:"Ally"},{value:"Enemy",label:"Enemy"},{value:"Servant",label:"Servant"},{value:"Mentor",label:"Mentor"}],components:Object(_.a)(),onChange:function(e){return function(e,t){var a=e.value;v(Object(g.a)(Object(g.a)({},m),{},Object(f.a)({},t,a)))}(e,"relationship_to_protagonist")}})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Appears in"}),Object(L.jsx)(C.a,{name:"books",options:T,isMulti:!0,components:Object(_.a)(),onChange:function(e){return F(e,"books")}})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Character Archetypes"}),Object(L.jsxs)(x.a.Text,{className:"text-muted",children:["Check out ",Object(L.jsx)("a",{href:"https://tvtropes.org/pmwiki/pmwiki.php/Main/NarrativeTropes",children:"TVTropes"})," for an idea on what tropes to pick"]}),Object(L.jsx)(C.a,{name:"character_archetypes",options:G,isMulti:!0,components:Object(_.a)(),onChange:function(e){return F(e,"character_archetypes")}})]})]}),Object(L.jsx)(h.a.Footer,{children:Object(L.jsx)(O.a,{variant:"primary",type:"submit",children:"Submit"})})]})})},I=a(36),T=function(e){return e.map((function(e){var t=e.id,a=e.first_name,n=e.last_name;return{value:t,label:"".concat(a," ").concat(n)}}))},G=function(e){return e.map((function(e){return{value:e.id,label:e.genre}}))},B=function(){var e=localStorage.getItem("nation"),t=document.body.classList;j()&&Object(p.a)(t).includes("defaultMode")&&(console.log(!0),t.remove("defaultMode"),t.add("".concat(e,"Mode")))},E=function(e){var t=e.isModal,a=Object(n.useState)({title:"",author:"",cover_image:"",genre:[],is_made_into_film:!1,is_made_into_series:!1,page_count:"",published_by:"",pub_date:"",story_overview:"",supporting_characters:[],main_protagonist:[],main_antagonist:[],ISBN:""}),r=Object(i.a)(a,2),c=r[0],s=r[1],l=Object(n.useState)(null),j=Object(i.a)(l,2),b=j[0],u=j[1],d=Object(n.useState)(null),m=Object(i.a)(d,2),v=m[0],w=m[1],F=Object(n.useState)(null),B=Object(i.a)(F,2),E=B[0],A=B[1],P=Object(n.useState)(null),M=Object(i.a)(P,2),H=M[0],R=M[1],q=Object(n.useState)(0),K=Object(i.a)(q,2),D=K[0],W=K[1],U=Object(o.f)();Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/antagonists/");case 2:t=e.sent,a=t.data,w(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/protagonists/");case 2:t=e.sent,a=t.data,u(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/supporting_characters/");case 2:t=e.sent,a=t.data,A(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/genres/");case 2:t=e.sent,a=t.data,R(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var J=function(e){var t=e.target,a=t.type,n=t.name,r=t.checked,o=t.value,i="checkbox"===a?r:o;s(Object(g.a)(Object(g.a)({},c),{},Object(f.a)({},n,i)))},Y=function(){var e=Object(k.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),""!==c.cover_image&&" "!==c.cover_image||(c.cover_image="https://cdn.wallpapersafari.com/35/57/iUfZRE.jpg"),e.next=4,N.a.post("/api/books/",c);case 4:a=e.sent,n=a.data.id,U.push("/books/".concat(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=e.target.value,a=parseInt(t);W(a)},z=function(e,t){var a=e.value;s(Object(g.a)(Object(g.a)({},c),{},Object(f.a)({},t,a)))},Q=function(e,t){var a=e?e.map((function(e){return e.value})):[];s(Object(g.a)(Object(g.a)({},c),{},Object(f.a)({},t,Object(p.a)(a))))};if(!v||!b||!E||!H)return Object(L.jsxs)(O.a,{disabled:!0,children:[Object(L.jsx)(I.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),"Loading..."]});var Z=T(b),X=T(v),$=T(E),ee=G(H);return Object(L.jsxs)(x.a,{onSubmit:Y,children:[t&&Object(L.jsx)(h.a.Header,{closeButton:!0,children:Object(L.jsx)(h.a.Title,{children:"Create a New Book"})}),0===D&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(x.a.Group,{controlId:"bookFormPartOne",children:Object(L.jsxs)(x.a.Row,{children:[Object(L.jsx)(S.a,{children:Object(L.jsxs)(x.a.Group,{controlId:"formBookTitle",children:[Object(L.jsx)(x.a.Label,{children:"Title"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"Enter Book Title",required:!0,name:"title",value:c.title,onChange:J})]})}),Object(L.jsx)(S.a,{children:Object(L.jsxs)(x.a.Group,{controlId:"forBookAuthor",children:[Object(L.jsx)(x.a.Label,{children:"Author"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"Enter Author name",name:"author",onChange:J,value:c.author}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:'Avoid punctuation e.g instead of "J.K. Rowling", enter "JK Rowling"'})]})})]})}),Object(L.jsxs)(x.a.Group,{controlId:"formCharacterBioProtagonist",children:[Object(L.jsx)(x.a.Label,{children:"Synopsis"}),Object(L.jsx)(x.a.Control,{as:"textarea",rows:4,placeholder:"enter info about the story",value:c.story_overview,name:"story_overview",required:!0,onChange:J}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:"Max length 2000 characters"}),Object(L.jsx)(x.a.Label,{children:"Select Genre"}),Object(L.jsx)(C.a,{name:"genre",options:ee,isMulti:!0,components:Object(_.a)(),onChange:function(e){return Q(e,"genre")}}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:"Select all/any genres that apply"}),Object(L.jsx)(O.a,{value:"1",onClick:V,children:"Move to next page"})]})]}),1===D&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(x.a.Group,{controlId:"filmSeriesPages",children:Object(L.jsxs)(x.a.Row,{children:[Object(L.jsx)(S.a,{children:Object(L.jsx)(x.a.Check,{name:"is_made_into_film",label:"Has it been made into a Film?",checked:c.is_made_into_film,onChange:J})}),Object(L.jsx)(S.a,{children:Object(L.jsx)(x.a.Check,{name:"is_made_into_series",label:"Has it been made into a Series?",checked:c.is_made_into_series,onChange:J})}),Object(L.jsxs)(S.a,{children:[Object(L.jsx)(x.a.Label,{children:"Number of Pages"}),Object(L.jsx)(x.a.Control,{type:"number",name:"page_count",value:c.page_count,label:"No. Pages",onChange:J})]})]})}),Object(L.jsx)(x.a.Group,{controlId:"publisherInfo",children:Object(L.jsxs)(x.a.Row,{children:[Object(L.jsxs)(S.a,{children:[Object(L.jsx)(x.a.Label,{children:"Publisher"}),Object(L.jsx)(x.a.Control,{type:"text",value:c.published_by,placeholder:"enter publisher",name:"published_by",onChange:J})]}),Object(L.jsxs)(S.a,{children:[Object(L.jsx)(x.a.Label,{children:"Date Published"}),Object(L.jsx)(x.a.Control,{type:"date",name:"pub_date",value:c.pub_date,onChange:J}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:"If the exact date is unknown, you can put the 1st of the month instead."})]}),Object(L.jsxs)(S.a,{children:[Object(L.jsx)(x.a.Label,{children:"Book Cover"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"url link",name:"cover_image",value:c.cover_image,onChange:J}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:"Enter URL link for cover image, or leave blank for a default"})]})]})}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"ISBN"}),Object(L.jsx)(x.a.Control,{type:"text",value:c.ISBN,placeholder:"enter ISBN",name:"ISBN",onChange:J}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:'Enter in format "978-3-16-148410-0"'})]}),t?Object(L.jsxs)(h.a.Footer,{children:[Object(L.jsx)(O.a,{value:"2",onClick:V,children:"Move to final page"}),Object(L.jsx)(O.a,{value:"0",onClick:V,children:"Go Back"})]}):Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(O.a,{value:"2",onClick:V,children:"Move to final page"}),Object(L.jsx)(O.a,{value:"0",onClick:V,children:"Go Back"})]})]}),2===D&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Select Protagonist"}),Object(L.jsx)(C.a,{name:"protagonists",options:Z,components:Object(_.a)(),onChange:function(e){return z(e,"protagonists")}})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Select Antagonist"}),Object(L.jsx)(C.a,{name:"antagonists",options:X,components:Object(_.a)(),onChange:function(e){return z(e,"antagonists")}})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Select Supporting Characters"}),Object(L.jsx)(C.a,{name:"supporting_characters",options:$,isMulti:!0,components:Object(_.a)(),onChange:function(e){return Q(e,"supporting_characters")}})]}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:"You can select multiple supporting characters"}),t?Object(L.jsxs)(h.a.Footer,{children:[Object(L.jsx)(O.a,{variant:"primary",type:"submit",children:"Submit"}),Object(L.jsx)(O.a,{value:"1",onClick:V,children:"Go Back"}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:"If a character doesn't exist, don't worry! You can add them to the book later "})]}):Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(O.a,{variant:"primary",type:"submit",children:"Submit"}),Object(L.jsx)(O.a,{value:"1",onClick:V,children:"Go Back"}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:"If a character doesn't exist, don't worry! You can add them to the book later "})]})]})]})},A=function(){var e=Object(o.f)(),t=Object(n.useState)({username:"",email:"",password:"",password_confirmation:"",nationality:""}),a=Object(i.a)(t,2),r=a[0],c=a[1],s=function(e){var t=Object(g.a)(Object(g.a)({},r),{},Object(f.a)({},e.target.name,e.target.value));c(t)},l=function(){var t=Object(k.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,N.a.post("/api/auth/register/",r);case 4:e.push("/login"),localStorage.setItem("nation",r.nationality),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(x.a,{onSubmit:l,children:[Object(L.jsx)(h.a.Header,{children:Object(L.jsx)(h.a.Title,{children:"Register Form"})}),Object(L.jsxs)(h.a.Body,{children:[Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Username"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"enter your username",name:"username",value:r.value,onChange:s,required:!0})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Email"}),Object(L.jsx)(x.a.Control,{type:"email",placeholder:"enter your email",name:"email",onChange:s,required:!0})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Password"}),Object(L.jsx)(x.a.Control,{type:"password",placeholder:"enter your password",name:"password",onChange:s,required:!0})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Nation"}),Object(L.jsx)(C.a,{name:"nationality",options:[{value:"fire",label:"Fire Nation"},{value:"earth",label:"Earth Kingdom"},{value:"air",label:"Air Nomads"},{value:"water",label:"Water Tribes"}],components:Object(_.a)(),onChange:function(e){return function(e,t){var a=e.value;c(Object(g.a)(Object(g.a)({},r),{},Object(f.a)({},t,a)))}(e,"nationality")}})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Password Confirmation"}),Object(L.jsx)(x.a.Control,{type:"password",placeholder:"re-enter your password",name:"password_confirmation",onChange:s,required:!0})]})]}),Object(L.jsx)(h.a.Footer,{children:Object(L.jsx)(O.a,{type:"submit",children:"Register"})})]})})},P=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(o.f)(),s=function(e){var t=Object(g.a)(Object(g.a)({},a),{},Object(f.a)({},e.target.name,e.target.value));r(t)},j=function(){var e=Object(k.a)(y.a.mark((function e(t){var n,r,s,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,N.a.post("/api/auth/login/",a);case 3:return n=e.sent,window.localStorage.setItem("token",n.data.token),r=l().sub,e.next=8,N.a.get("api/auth/user/".concat(r,"/"));case 8:s=e.sent,o=s.data,localStorage.setItem("nation",o.nationality),B(),c.push("/books/");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(x.a,{className:"login-box",onSubmit:j,children:[Object(L.jsx)(h.a.Header,{children:Object(L.jsx)(h.a.Title,{children:"Login Form"})}),Object(L.jsxs)(h.a.Body,{children:[Object(L.jsx)(x.a.Group,{children:Object(L.jsx)(x.a.Control,{className:"login-input",placeholder:"Email",name:"email",onChange:s,value:a.email})}),Object(L.jsx)(x.a.Group,{children:Object(L.jsx)(x.a.Control,{onChange:s,className:"login-input",type:"password",placeholder:"Password",name:"password",value:a.password})})]}),Object(L.jsx)(h.a.Footer,{className:"field",children:Object(L.jsx)(O.a,{type:"submit",children:"Log In"})})]})})},M=function(){var e=Object(o.f)(),t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),l=Object(i.a)(s,2),p=l[0],f=l[1],g=Object(n.useState)(!1),v=Object(i.a)(g,2),y=v[0],k=v[1],w=Object(n.useState)(!1),N=Object(i.a)(w,2),C=N[0],_=N[1],S=Object(n.useState)(""),I=Object(i.a)(S,2),T=I[0],G=I[1],B=function(e){var t=e.target.name;"book"===t?f(!0):"login"===t?k(!0):"register"===t?_(!0):(c(!0),G(t))},M=function(){c(!1),f(!1),k(!1),_(!1)};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(b.a,{expand:"xl",className:"navbar background",children:Object(L.jsxs)(u.a,{className:"mr=auto",children:[Object(L.jsx)(b.a.Brand,{className:"nav-element secondary",href:"/",children:"Home"}),Object(L.jsx)(u.a.Link,{className:"nav-element secondary",href:"/books",children:"Books"}),Object(L.jsx)(u.a.Link,{className:"nav-element secondary",href:"/genres",children:"Genres"}),Object(L.jsx)(u.a.Link,{className:"nav-element secondary",href:"/protagonists",children:"Protagonists"}),Object(L.jsx)(u.a.Link,{className:"nav-element secondary",href:"/antagonists",children:"Antagonists"}),Object(L.jsx)(u.a.Link,{className:"nav-element secondary",href:"/supporting_characters",children:"Supporting Characters"}),j()&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(u.a.Link,{className:"nav-element secondary",href:"/search",children:"Search"}),Object(L.jsxs)(d.a,{className:"nav-element secondary",title:"Forms",id:"basic-nav-dropdown",children:[Object(L.jsx)(d.a.Item,{className:"primary",onClick:B,name:"protagonists",children:"Submit a Protagonist"}),Object(L.jsx)(d.a.Item,{className:"secondary",onClick:B,name:"antagonists",children:"Submit a Antagonist"}),Object(L.jsx)(d.a.Item,{className:"primary",onClick:B,name:"supporting_characters",children:"Submit a Supporting Character"}),Object(L.jsx)(d.a.Item,{className:"secondary",name:"book",onClick:B,children:"Submit a book"})]}),Object(L.jsx)(u.a.Link,{className:"nav-element secondary",href:"/profile",children:"Profile"}),Object(L.jsx)(O.a,{className:"nav-element  secondary",onClick:function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("nation"),window.alert("you have logged out, returning to homepage"),e.push("/"),window.location.reload()},children:"Logout"})]}),!j()&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(u.a.Link,{className:"nav-element secondary",onClick:B,name:"login",children:"Log In"}),Object(L.jsx)(u.a.Link,{className:"nav-element secondary",onClick:B,name:"register",children:"Register"})]}),Object(L.jsxs)(x.a,{className:"form-styling ",inline:!0,children:[Object(L.jsx)(m.a,{type:"text",placeholder:"Search for a Book (WIP)",className:" mr-sm-2"}),Object(L.jsx)(O.a,{style:{cursor:"not-allowed"},type:"button",children:"Submit"})]})]})}),Object(L.jsx)(h.a,{show:r,onHide:M,centered:!0,children:Object(L.jsx)(F,{characterType:T})}),Object(L.jsx)(h.a,{show:p,onHide:M,centered:!0,children:Object(L.jsx)(E,{isModal:!0})}),Object(L.jsx)(h.a,{show:C,onHide:M,centered:!0,children:Object(L.jsx)(A,{})}),Object(L.jsx)(h.a,{show:y,onHide:M,centered:!0,children:Object(L.jsx)(P,{})})]})},H=a(21),R=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(0),o=Object(i.a)(c,2),l=o[0],j=o[1],b=Object(n.useState)({username:"",email:"",password:"",password_confirmation:"",nationality:""}),u=Object(i.a)(b,2),d=u[0],h=u[1],m=function(e){var t=Object(g.a)(Object(g.a)({},d),{},Object(f.a)({},e.target.name,e.target.value));h(t)},p=function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),v(t),e.prev=2,e.next=5,N.a.post("/api/auth/register/",d);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=e.target.value,a=parseInt(t);r(a)},w=function(e){var t=e.target.value,a=parseInt(t);j(a)},S=[8,9];return Object(L.jsx)(H.a,{className:"trim",children:Object(L.jsxs)("div",{className:"homepage-container secondary",children:[Object(L.jsxs)("div",{className:"homepage-container-sections-left",children:[Object(L.jsx)("div",{className:"homepage-wan-shi-image"}),Object(L.jsxs)("div",{className:"homepage-text",children:[0===a&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("p",{children:"Welcome, Humans, to my Library. I am Wan Shi Tong, He who Knows Ten Thousand Things"}),Object(L.jsx)("p",{children:"To enter my library you must prove your worth as scholars"})]}),1===a&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("p",{children:"A Book you say? My Knowledge Seekers are quite thorough, I doubt you possess something they have not found..."}),Object(L.jsx)("p",{children:"Very well I will se your book, though I am not expecting much. Oh, I suppose I should ask who you are..."})]}),2===a&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("p",{children:"Hmm... that does not sound like an actual name..."}),Object(L.jsx)("p",{children:"Nevermind, what nation are you from?"})]}),3===a&&Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("p",{children:"So that Book you have, tell me about it"})}),4===a||7===a&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("p",{children:"I suppose that will do..."}),Object(L.jsxs)("p",{children:[" You may enter",7===a&&Object(L.jsx)(L.Fragment,{children:", however you will receive no assistance until you tell me who you are"})]})]}),5===a&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("p",{children:"Forgive me, you all look so alike"}),Object(L.jsx)("p",{children:"Who are you again?"})]}),6===a&&0===l&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("p",{children:"You wish to show your knowledge?"}),Object(L.jsx)("p",{children:"Very well, riddle me this"}),Object(L.jsx)("p",{children:"I make two people out of one, what am I ?"})]}),1===l?Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("p",{children:"Your not very smart, are you?"})}):2===l?Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("p",{children:"No."})}):3===l?Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("p",{children:"*Sigh*"})}):null,S.includes(a)&&Object(L.jsxs)(L.Fragment,{children:[4!==a&&Object(L.jsxs)("p",{children:["If you're going to",9===a?Object(L.jsx)(L.Fragment,{children:" lie to "}):Object(L.jsx)(L.Fragment,{children:" try to sneak past "}),Object(L.jsx)(L.Fragment,{children:"an All-Knowing spirit being, you should should at least put some effort into it"})]}),Object(L.jsx)("p",{children:"*Sigh... you may enter"}),4!==a&&Object(L.jsx)("p",{children:"However, you will receive no assistance until you tell me who you are"})]})]})]}),Object(L.jsxs)("div",{className:"homepage-container-sections-right",children:[0===a&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(O.a,{className:"page-zero-button primary",onClick:v,value:"1",children:"Provide a book to the Library"}),Object(L.jsx)(O.a,{className:"page-zero-button primary",onClick:v,value:"6",children:"Prove your Knowledge by Answering a Riddle"}),Object(L.jsx)(O.a,{className:"page-zero-button primary",onClick:v,value:"8",children:"Sneak into the Library"}),Object(L.jsxs)(O.a,{className:"page-zero-button primary",onClick:v,value:"5",children:[" ","I've been here before!!"]})]}),1===a&&Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{className:"homepage-container-sections",children:Object(L.jsxs)(x.a,{children:[Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Username"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"enter your username",name:"username",value:d.username,onChange:m,required:!0})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Email"}),Object(L.jsx)(x.a.Control,{type:"email",placeholder:"enter your email",name:"email",value:d.email,onChange:m,required:!0})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Nation"}),Object(L.jsx)(C.a,{name:"nationality",options:[{value:"fire",label:"Fire Nation"},{value:"earth",label:"Earth Kingdom"},{value:"air",label:"Air Nomads"},{value:"water",label:"Water Tribes"}],components:Object(_.a)(),onChange:function(e){return function(e,t){var a=e.value;h(Object(g.a)(Object(g.a)({},d),{},Object(f.a)({},t,a)))}(e,"nationality")}})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Password"}),Object(L.jsx)(x.a.Control,{type:"password",placeholder:"enter your password",name:"password",value:d.password,onChange:m,required:!0})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Password Confirmation"}),Object(L.jsx)(x.a.Control,{type:"password",placeholder:"re-enter your password",name:"password_confirmation",value:d.password_confirmation,onChange:m,required:!0}),Object(L.jsx)(O.a,{onClick:p,value:"3",children:"Answer his questions"}),Object(L.jsx)("p",{children:"OR..."}),Object(L.jsx)(O.a,{onClick:v,value:"8",children:"sneak into the library"})]})]})})}),2===a&&Object(L.jsxs)("div",{className:"homepage-container-sections",children:[Object(L.jsx)(O.a,{value:"3",onClick:v,children:"Water Tribe"}),Object(L.jsx)(O.a,{value:"3",onClick:v,children:"Earth Kingdom"}),Object(L.jsx)(O.a,{value:"3",onClick:v,children:"Fire Nation"}),Object(L.jsx)(O.a,{value:"3",onClick:v,children:"Air Nomad"})]}),3===a&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:"homepage-container-sections",children:Object(L.jsx)(E,{isModal:!1})}),Object(L.jsx)("div",{className:"homepage-container-sections buttons-page-0",children:Object(L.jsx)(O.a,{onClick:v,value:"4",children:"Tell him you will talk about it inside after you have settled inside"})})]}),S.includes(a)&&Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{className:"homepage-container-sections enter-library",children:Object(L.jsx)(s.b,{to:"/books/",children:Object(L.jsx)(O.a,{children:"Enter the Library"})})})}),5===a&&Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{className:"homepage-container-sections",children:Object(L.jsx)(P,{})})}),6===a&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:"homepage-container-sections riddle-buttons",children:[Object(L.jsx)(O.a,{value:"1",onClick:w,children:"A Surgeon"}),Object(L.jsx)(O.a,{value:"2",onClick:w,children:"A Magician"}),Object(L.jsx)(O.a,{value:"3",onClick:w,children:"A Identity Thief"}),Object(L.jsx)(O.a,{value:"7",onClick:v,children:"A Mirror"})]}),Object(L.jsxs)("div",{className:"homepage-container-sections",children:[Object(L.jsx)(O.a,{onClick:v,value:"1",children:"Give him a book instead"}),Object(L.jsx)(O.a,{onClick:v,value:"9",children:"Make up an elaborate lie to get into the library for nothing"})]})]})]})]})})},q=a(118),K=a(63),D=function(){return Object(L.jsx)(q.a,{fluid:!0,className:"background",fixed:"bottom",children:Object(L.jsx)(K.a,{children:Object(L.jsx)(K.a.Item,{className:"primary",children:"Website created by Jesse Edwards and George Shaw"})})})},W=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1],c=l().sub;if(Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("api/auth/user/".concat(c,"/"));case 2:t=e.sent,a=t.data,r(a),B();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]),!a)return Object(L.jsxs)(O.a,{disabled:!0,children:[Object(L.jsx)(I.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),"Loading..."]});var s=a.username,o=a.email,j=a.date_joined,b=a.nationality;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("h1",{className:"character-header",children:"User Profile Page"}),Object(L.jsxs)("div",{className:"profile-container",children:[Object(L.jsx)("div",{className:"profile-info-left",children:Object(L.jsx)("div",{className:"profile-image"})}),Object(L.jsxs)("div",{className:"profile-info-right",children:[Object(L.jsx)("div",{className:"profile-info-right-sections",children:Object(L.jsxs)("h3",{className:"profile-h3-right",children:["Username: ",s]})}),Object(L.jsx)("div",{className:"profile-info-right-sections",children:Object(L.jsxs)("h3",{className:"profile-h3-right",children:["Email: ",o]})}),Object(L.jsx)("div",{className:"profile-info-right-sections",children:Object(L.jsxs)("h3",{className:"profile-h3-right",children:["Member Since: ",j]})}),Object(L.jsx)("div",{className:"profile-info-right-sections",children:Object(L.jsxs)("h3",{className:"profile-h3-right",children:[" Nation: ",b]})})]})]})]})},U=function(e){var t=e.book,a=t.title,n=t.author,r=t.cover_image;return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("main",{children:Object(L.jsx)("div",{className:"book-card__cover",children:Object(L.jsxs)("div",{className:"book-card__book",children:[Object(L.jsx)("div",{className:"book-card__book-front",children:Object(L.jsx)("img",{className:"book-card__img",src:r,alt:"the cover for ".concat(a,", by ").concat(n)})}),Object(L.jsx)("div",{className:"book-card__book-back"}),Object(L.jsx)("div",{className:"book-card__book-side"})]})})})})},J=a(167),Y=function(){B();var e=Object(o.g)().id,t=Object(n.useState)(null),a=Object(i.a)(t,2),r=a[0],c=a[1];if(Object(n.useEffect)((function(){(function(){var t=Object(k.a)(y.a.mark((function t(){var a,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("/api/books/".concat(e,"/"));case 2:a=t.sent,n=a.data,c(n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),!r)return null;var s=r.supporting_characters,l=r.main_protagonist,j=r.main_antagonist,b=r.genre,u=r.title,d=r.author,h=r.is_made_into_film,O=r.is_made_into_series,m=r.story_overview,x=b.map((function(e){return" ".concat(e.genre)})).toString(),p=s.map((function(e){return" ".concat(e.first_name," ").concat(e.last_name)})).toString();return Object(L.jsx)("div",{className:"book-show-card-container",children:Object(L.jsxs)(H.a,{className:"book-show-card",style:{width:"40rem"},children:[Object(L.jsx)(H.a.Body,{children:Object(L.jsx)(H.a.Title,{children:"".concat(u,", by ").concat(d)})}),Object(L.jsx)(J.a,{children:Object(L.jsx)(S.a,{className:"book-show-info-left book-card",children:Object(L.jsx)(U,{book:r})})}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Book Title"}),Object(L.jsx)(S.a,{children:u})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Author"}),Object(L.jsx)(S.a,{children:Object(L.jsx)("a",{href:"https://en.wikipedia.org/wiki/".concat(d),children:d})})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Synopsis"}),Object(L.jsx)(S.a,{children:Object(L.jsx)("p",{children:m})})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Protagonist"}),Object(L.jsx)(S.a,{children:l.length>0&&Object(L.jsx)("p",{children:"".concat(l[0].first_name," ").concat(l[0].last_name)})})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Antagonist"}),Object(L.jsx)(S.a,{children:j.length>0&&Object(L.jsx)("p",{children:"".concat(j[0].first_name," ").concat(j[0].last_name)})})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Supporting Characters"}),Object(L.jsx)(S.a,{children:Object(L.jsx)("p",{children:p})})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Genre"}),Object(L.jsx)(S.a,{children:x})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Has it Been Made Into a Film?"}),Object(L.jsx)(S.a,{children:h?"Yes":"No"})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Has it Been Made into a Series"}),Object(L.jsx)(S.a,{children:O?"Yes":"No"})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Publisher"}),Object(L.jsx)(S.a,{})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Publication Date"}),Object(L.jsx)(S.a,{})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"ISBN"}),Object(L.jsx)(S.a,{})]}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(S.a,{children:"Number of Pages"}),Object(L.jsx)(S.a,{})]}),Object(L.jsx)(H.a.Body,{children:Object(L.jsx)(q.a,{})})]})})},V=function(e){var t=e.books;return Object(L.jsx)(L.Fragment,{children:t.map((function(e){var t=e.title,a=e.author,n=e.cover_image,r=e.id;return Object(L.jsx)(s.b,{className:"book-link",to:"/books/".concat(r),children:Object(L.jsx)("li",{className:"book",children:Object(L.jsx)("img",{src:n,alt:"the cover for ".concat(t,", by ").concat(a)})})},r)}))})},z=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/books/");case 2:t=e.sent,a=t.data,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),B()}),[]),a?Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("ul",{className:"books-index-container background",children:Object(L.jsx)(V,{books:a})})}):Object(L.jsxs)(O.a,{disabled:!0,children:[Object(L.jsx)(I.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),"Loading..."]})},Q=function(e){var t=e.character,a=t.books,n=t.first_name,r=t.last_name,c=t.character_bio,s=t.relationship_to_protagonist,o=t.quote;return Object(L.jsxs)(H.a,{className:"character-card background",style:{width:"auto"},children:[Object(L.jsx)(H.a.Header,{className:"secondary",children:"".concat(n," ").concat(r)}),Object(L.jsxs)(H.a.Body,{className:"trim",children:[Object(L.jsx)(H.a.Title,{}),s&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(H.a.Subtitle,{className:"mb-2 text-muted",children:"Relationship to Protagonist"}),Object(L.jsx)(H.a.Text,{children:s})]}),o&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(H.a.Subtitle,{className:"mb-2 text-muted",children:"Memorable Quote:"}),Object(L.jsx)(H.a.Text,{children:'"'.concat(o,'"')})]}),Object(L.jsx)(H.a.Text,{children:c})]}),Object(L.jsxs)(H.a.Footer,{className:"secondary",children:["Appears In: ",a.map((function(e){var t=e.title,a=e.id;return Object(L.jsx)(H.a.Link,{href:"/books/".concat(a),children:t},a)}))]})]})},Z=a(59),X=function(){B();var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/protagonists/");case 2:t=e.sent,a=t.data,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),a?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("h1",{className:"character-header background",children:"Protagonists"}),Object(L.jsx)(Z.a,{className:"background",children:a.map((function(e){return Object(L.jsx)(Q,{characterType:"protagonist",character:e},e.id)}))})]}):Object(L.jsxs)(O.a,{disabled:!0,children:[Object(L.jsx)(I.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),"Loading..."]})},$=function(){B();var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/antagonists/");case 2:t=e.sent,a=t.data,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),a?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("h1",{className:"character-header background",children:"Antagonists"}),Object(L.jsx)(Z.a,{className:"background",children:a.map((function(e){return Object(L.jsx)(Q,{characterType:"protagonist",character:e},e.id)}))})]}):Object(L.jsxs)(O.a,{disabled:!0,children:[Object(L.jsx)(I.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),"Loading..."]})},ee=function(){B();var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/supporting_characters/");case 2:t=e.sent,a=t.data,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),a?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("h1",{className:"character-header background",children:"Supporting Characters"}),Object(L.jsx)(Z.a,{className:"background",children:a.map((function(e){return Object(L.jsx)(Q,{characterType:"supporting",character:e},e.id)}))})]}):Object(L.jsxs)(O.a,{disabled:!0,children:[Object(L.jsx)(I.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),"Loading..."]})},te=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){B(),function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("api/genres/");case 2:t=e.sent,a=t.data,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),a?Object(L.jsx)(L.Fragment,{children:a.sort((function(e,t){var a=e.genre.toUpperCase(),n=t.genre.toUpperCase();return a<n?-1:a>n?1:0})).filter((function(e){return e.books.length>0})).map((function(e){var t=e.id,a=e.books,n=e.genre;return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)("div",{className:"genre background",children:[Object(L.jsx)("p",{className:"character-header",children:n}),Object(L.jsx)("div",{className:"books-index-container background",children:Object(L.jsx)(V,{books:a})})]},t)})}))}):null},ae=a(96),ne=function(){B();var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(i.a)(c,2),l=o[0],j=o[1],b=Object(n.useState)({formTitle:"",formAuthor:"",formIsFilm:"",formSearchPhrases:"",formGenres:[],formFirstName:"",formLastName:"",formIsSeries:""}),u=Object(i.a)(b,2),d=u[0],m=u[1],v=Object(n.useState)([]),w=Object(i.a)(v,2),F=w[0],I=w[1],T=Object(n.useState)(!0),E=Object(i.a)(T,2),A=E[0],P=E[1];Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("api/books/");case 2:t=e.sent,a=t.data,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("api/genres/");case 2:t=e.sent,a=t.data,j(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var M=function(e){var t=e.target,a=t.type,n=t.name,r=t.checked,c=t.value,s="checkbox"===a?r:c;m(Object(g.a)(Object(g.a)({},d),{},Object(f.a)({},n,s)))},R=d.formTitle,q=d.formAuthor,D=d.formIsFilm,W=d.formGenres,U=d.formFirstName,J=d.formLastName,Y=d.formIsSeries,V=[],z=function(){return P(!1)};if(!a||!l)return null;var Q=l.sort((function(e,t){var a=e.genre.toUpperCase(),n=t.genre.toUpperCase();return a<n?-1:a>n?1:0})),Z=G(Q);return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(h.a,{show:A,onHide:z,backdrop:"static",keyboard:!1,size:"lg",centered:!0,children:[Object(L.jsx)(h.a.Header,{closeButton:!0,children:Object(L.jsx)(h.a.Title,{children:"Enter Search Information Below"})}),Object(L.jsxs)(x.a,{className:"form search-form",onSubmit:function(e){e.preventDefault(),P(!1),a.forEach((function(e){var t=0,a=[],n=e.title,r=e.author,c=e.is_made_into_film,s=e.is_made_into_series,o=e.genre,i=e.supporting_characters,l=e.main_protagonist,j=e.main_antagonist;""!==R&&n.toLowerCase().includes(R.toLowerCase())&&(t++,a.push(n)),""!==q&&r.toLowerCase().includes(q.toLowerCase())&&(t++,a.push(r)),""!==D&&c===D&&(t++,a.push("Made into film")),""!==Y&&s===Y&&(t++,a.push("Made into tv series")),W.forEach((function(e){var n=o.map((function(e){return e.id})),r=o.find((function(t){return t.id=e})).genre;n.includes(e)&&t++,a.push(r)})),i.forEach((function(e){var n="".concat(e.first_name," ").concat(e.last_name).trim();""!==U&&U.toLowerCase().includes(e.first_name.toLowerCase())&&(a.push(n),t++),""!==J&&J.toLowerCase().includes(e.last_name.toLowerCase())&&(a.push(n),t++)})),l.forEach((function(e){var n="".concat(e.first_name," ").concat(e.last_name).trim();""!==U&&e.first_name.toLowerCase().includes(U.toLowerCase())&&(t++,a.push(n)),""!==J&&e.last_name.toLowerCase().includes(J.toLowerCase())&&(t++,a.push(n))})),j.forEach((function(e){if(""!==U&&e.first_name.toLowerCase().includes(U.toLowerCase())&&(a.push(e.first_name),t++),""!==J&&e.last_name.toLowerCase().includes(J.toLowerCase())){var n="".concat(e.first_name," ").concat(e.last_name).trim();t++,a.push(n)}}));var b=Object(p.a)(new Set(a));0!==t&&V.push({resultBook:e,searchHits:t,results:b,bookTitle:n})})),I(V)},children:[Object(L.jsx)(x.a.Group,{controlId:"bookFormPartOne",children:Object(L.jsxs)(x.a.Row,{children:[Object(L.jsx)(S.a,{children:Object(L.jsxs)(x.a.Group,{controlId:"formBookTitle",children:[Object(L.jsx)(x.a.Label,{children:"Title"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"Enter Book Title",name:"formTitle",value:d.title,onChange:M})]})}),Object(L.jsx)(S.a,{children:Object(L.jsxs)(x.a.Group,{controlId:"forBookAuthor",children:[Object(L.jsx)(x.a.Label,{children:"Author"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"Enter Author name",name:"formAuthor",value:FormData.formAuthor,onChange:M}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:'Avoid punctuation e.g instead of "J.K. Rowling", enter "JK Rowling"'})]})})]})}),Object(L.jsxs)(x.a.Group,{controlId:"formCharacterBioProtagonist",children:[Object(L.jsx)(x.a.Label,{children:"Search by Keyword"}),Object(L.jsx)(x.a.Control,{as:"textarea",rows:4,placeholder:"enter info about the story",value:d.formSearchPhrases,name:"formSearchPhrases",onChange:M}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:"separate each word by comma i.e Mudblood, Dragon, Scar. Do not use punctuation and avoid common words like and the etc."}),Object(L.jsx)(x.a.Label,{children:"Select Genre"}),Object(L.jsx)(C.a,{name:"formGenres",options:Z,isMulti:!0,components:Object(_.a)(),onChange:function(e){return function(e,t){var a=e?e.map((function(e){return e.value})):[];m(Object(g.a)(Object(g.a)({},d),{},Object(f.a)({},t,Object(p.a)(a))))}(e,"formGenres")}})]}),Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(S.a,{children:Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"First Name"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"What is their first name",value:d.formFirstName,name:"formFirstName",onChange:M}),Object(L.jsx)(x.a.Text,{className:"text-muted",children:'for a character with a title or one given name enter here. e.g "Lord Voldemort".'})]})}),Object(L.jsx)(S.a,{children:Object(L.jsxs)(x.a.Group,{children:[Object(L.jsx)(x.a.Label,{children:"Last Name"}),Object(L.jsx)(x.a.Control,{type:"text",placeholder:"What is their last name",name:"formLastName",value:d.formLastName,onChange:M})]})})]}),Object(L.jsx)(x.a.Group,{controlId:"filmSeriesPages",children:Object(L.jsxs)(x.a.Row,{children:[Object(L.jsx)(S.a,{children:Object(L.jsx)(x.a.Check,{name:"formIsFilm",label:"Has it been made into a Film?",checked:d.formIsFilm,onChange:M})}),Object(L.jsx)(S.a,{children:Object(L.jsx)(x.a.Check,{name:"formIsSeries",label:"Has it been made into a Series?",checked:d.formIsSeries,onChange:M})})]})}),Object(L.jsxs)(x.a.Group,{className:"field",children:[Object(L.jsx)(O.a,{type:"submit",children:"Search"}),Object(L.jsx)(O.a,{className:"button",onClick:z,children:"Cancel and Leave"})]})]})]}),Object(L.jsx)("section",{children:!A&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("h2",{className:"search-h2",children:["Search Results: ",F.length," matches"]}),0===F.length?Object(L.jsx)("p",{children:"Sorry we've not found a match... please try again"}):Object(L.jsx)("div",{className:"book-search-container",children:F.sort((function(e,t){return t.searchHits-e.searchHits})).map((function(e,t){var a=e.searchHits,n=e.resultBook,r=e.results,c=e.bookTitle,o=n.cover_image,i=n.id,l=n.title,j=n.author;return Object(L.jsxs)("div",{className:"book-search-result",children:[Object(L.jsx)("div",{className:"book",children:Object(L.jsx)(H.a.Img,{src:o,alt:"the cover for ".concat(l,", by ").concat(j),value:i})}),Object(L.jsxs)(H.a,{border:0===t&&"success",style:{width:"10rem"},children:[Object(L.jsx)(H.a.Header,{children:Object(L.jsx)(s.b,{to:"/books/".concat(i),children:c})}),Object(L.jsxs)(H.a.Text,{children:[Object(L.jsxs)(ae.a,{children:[Object(L.jsx)(ae.a.Toggle,{as:O.a,variant:"link",eventKey:"0",children:"View/Hide Result matches"}),Object(L.jsx)(ae.a.Collapse,{eventKey:"0",children:Object(L.jsx)(K.a,{children:r.map((function(e,t){return Object(L.jsx)(K.a.Item,{children:e},t)}))})})]}),Object(L.jsxs)(H.a.Footer,{className:"text-muted",children:["search hits: ",a]})]})]})]},i)}))}),Object(L.jsx)(O.a,{variant:"primary",onClick:function(){P(!0),I([]),m({formTitle:"",formAuthor:"",formIsFilm:"",formSearchPhrases:"",formGenres:[],formFirstName:"",formLastName:"",formIsSeries:""})},children:"New Search"})]})})]})},re=function(){return Object(L.jsx)("div",{className:"browserRouter background",children:Object(L.jsxs)(s.a,{children:[Object(L.jsx)(M,{}),Object(L.jsxs)(o.c,{children:[Object(L.jsx)(o.a,{exact:!0,path:"/",children:Object(L.jsx)(R,{})}),Object(L.jsx)(o.a,{exact:!0,path:"/books",children:Object(L.jsx)(z,{})}),Object(L.jsx)(o.a,{exact:!0,path:"/books/:id",children:Object(L.jsx)(Y,{})}),Object(L.jsx)(o.a,{exact:!0,path:"/genres",children:Object(L.jsx)(te,{})}),Object(L.jsx)(o.a,{exact:!0,path:"/search",children:Object(L.jsx)(ne,{})}),Object(L.jsx)(o.a,{exact:!0,path:"/protagonists",children:Object(L.jsx)(X,{})}),Object(L.jsx)(o.a,{exact:!0,path:"/antagonists",children:Object(L.jsx)($,{})}),Object(L.jsx)(o.a,{exact:!0,path:"/supporting_characters",children:Object(L.jsx)(ee,{})}),Object(L.jsx)(o.a,{exact:!0,path:"/profile",children:Object(L.jsx)(W,{})})]}),Object(L.jsx)(D,{})]})})};c.a.render(Object(L.jsx)(re,{}),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.c6ede888.chunk.js.map